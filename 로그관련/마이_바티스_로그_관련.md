
스프링 부트 마이바티스 로그 관련하여 아래와 같이 셋팅 
#MyBatis
mybatis.mapper-locations=mappers/**/*.xml
mybatis.type-aliases-package=edu.hi.ex.vo
logging.level.edu.hi.ex.mapper=TRACE

위와 같이 셋팅을 하면 아래와 같이 트레이가 됨
2022-06-24 12:38:47.919 DEBUG 2028 --- [nio-8282-exec-7] edu.hi.ex.mapper.BoardMapper.read        : ==>  Preparing: select * from mvc_board where bid = ?
2022-06-24 12:38:47.919 DEBUG 2028 --- [nio-8282-exec-7] edu.hi.ex.mapper.BoardMapper.read        : ==> Parameters: 7(Integer)
2022-06-24 12:38:47.921 TRACE 2028 --- [nio-8282-exec-7] edu.hi.ex.mapper.BoardMapper.read        : <==    Columns: BID, BNAME, BTITLE, BCONTENT, BDATE, BHIT, BGROUP, BSTEP, BINDENT
2022-06-24 12:38:47.921 TRACE 2028 --- [nio-8282-exec-7] edu.hi.ex.mapper.BoardMapper.read        : <==        Row: 7, 1234, 한글, 한글, 2022-06-13 01:08:54, 6, 7, 0, 0
2022-06-24 12:38:47.921 DEBUG 2028 --- [nio-8282-exec-7] edu.hi.ex.mapper.BoardMapper.read        : <==      Total: 1

좀더 예쁘게 하기 위하여 .. 아래와 같이 셋팅함.

조금 더 보기 좋은 MyBatis 쿼리 Logging
 
https://sosohanya.tistory.com/31

1. pom.xml에 의존성 추가

<dependency>
  <groupId>org.bgee.log4jdbc-log4j2</groupId>
  <artifactId>log4jdbc-log4j2-jdbc4.1</artifactId>
  <version>1.16</version>
</dependency>
2. JDBC URL 변경 - URL 앞에 jdbc:log4 추가 (application.properties) 

: spring.datasource.url=jdbc:log4jdbc:h2:~/leveldiary;AUTO_SERVER=TRUE

 

3. JDBC driver-class-name 설정 (application.properties)

: spring.datasource.driver-class-name=net.sf.log4jdbc.sql.jdbcapi.DriverSpy 

 

4. logger 설정 (SLF4J 사용)

    4-1. /src/main/resources 폴더에 log4jdbc.log4j2.properties 파일 추가 

log4jdbc.spylogdelegator.name=net.sf.log4jdbc.log.slf4j.Slf4jSpyLogDelegator
logback-spring.xml 설정 파일을 추가하지 않고 여기까지만 해도 로그는 잘 나오는 것을 확인하였다. 세심한 설정 및 줄 바꿈으로 가독성 향상을 원한다면 아래 4-2 내용을 추가
    4-2. /src/main/resources 폴더에 logback-spring.xml 설정

<?xml version="1.0" encoding="UTF-8"?>
<configuration>
	<include resource="org/springframework/boot/logging/logback/base.xml"/>
	
	<!-- 좀 더 보기 좋은 MyBatis 쿼리 Log : log4jdbc -->
	<logger name="jdbc.sqlonly" level="debug" />
	<logger name="jdbc.sqltiming" level="off" />
	<logger name="jdbc.audit" level="off" />
	<logger name="jdbc.resultset" level="off" />
	<logger name="jdbc.resultsettable" level="debug" />
	<logger name="jdbc.connection" level="off" />
</configuration>
jdbc.sqlonly : SQL만 log. prepared statement에서 실행된 SQL은 해당 위치에 바인딩된 argument로 자동으로 표시되므로 가독성이 크게 향상된다.
jdbc.sqltiming : 실행시간과 SQL log
jdbc.audit : ResultSets을 제외한 모든 JDBC 호출 log. 이는 매우 방대한 출력이며 특정 JDBC 문제를 추적할 경우가 아니면 일반적으로 필요하지 않음
jdbc.resultset : ResultSet 객체에 대한 모든 호출이 기록되므로 훨씬 더 방대
jdbc.resultsettable : 테이블로 jdbc 결과를 log. Level debug는 result set에서 읽지 않은 값을 채운다
jdbc.connection : connection open, close 이벤트를 기록하고 열려있는 모든 connection number를 dump. connection 누수 문제를 해결하는데 매우 유용
위 내용을 참고하여 각자 용도에 맞게 level 설정하여 사용 
